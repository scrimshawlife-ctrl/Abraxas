{
  "$id": "schema/v2/v2_mode_router_output.v1.json",
  "type": "object",
  "additionalProperties": false,
  "required": ["mode","reasons","tags","provenance"],
  "properties": {
    "mode": { "type": "string", "enum": ["SNAPSHOT","ANALYST","RITUAL"] },
    "reasons": { "type": "array", "maxItems": 10, "items": { "type": "string", "maxLength": 64 } },
    "tags": {
      "type": "object",
      "additionalProperties": false,
      "required": ["state","confidence"],
      "properties": {
        "state": { "type": "string", "enum": ["INFERRED"] },
        "confidence": { "type": "number", "minimum": 0, "maximum": 1 }
      }
    },
    "provenance": {
      "type": "object",
      "additionalProperties": false,
      "required": ["config_hash"],
      "properties": { "config_hash": { "type": "string", "minLength": 16, "maxLength": 128 } }
    }
  }
}
